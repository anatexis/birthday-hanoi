<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OSKARS GEBURTSTAGSRÃ„TSELEINLADUNG</title>
<!-- Googleâ€‘Font fÃ¼r Piratenâ€‘Look -->
<link href="https://fonts.googleapis.com/css2?family=Pirata+One&display=swap" rel="stylesheet">
<style>
/************  Farbâ€‘ & Layoutâ€‘Variablen  ************/
:root{
  --mast-width:14px;           /* Pegâ€‘Breite = Mast */
  --mast-height:250px;
  --disk-height:36px;          /* â€Segelâ€œ */
  --wood:#5b3a18;              /* Mastfarbe */
  --parchment:#f1e7d0;         /* Seitenhintergrund */
  --sail:#fffbe6;              /* Segelstoff */
  --sail-border:#c9c2a6;
}
/************  Grundlayout  ************/
body{
  font-family:'Pirata One', cursive;
  background:var(--parchment) url('https://cdn.jsdelivr.net/gh/tylermguyen/stock@main/parchment.jpg') repeat; /* CCâ€‘0 Textur */
  margin:0;padding:2rem;text-align:center;color:#321;
}
h1{margin:0 0 1rem;font-size:2.2rem;letter-spacing:1px;}
#ship{ /* Schiffsâ€‘Rumpf als dekorativer Container */
  background:url('ship.png') center bottom / contain no-repeat;
  height:220px;max-width:800px;margin:0 auto;position:relative;pointer-events:none;
}
#board{display:flex;justify-content:space-around;max-width:800px;margin:0 auto;pointer-events:auto;}

/************  Pegs â†’ Masten  ************/
.peg{
  position:relative;
  width:var(--mast-width);
  height:var(--mast-height);
  background:var(--wood);
  display:flex;flex-direction:column-reverse;align-items:center;gap:4px;cursor:pointer;user-select:none;
  border-radius:3px;
}
/* Kleine Piratenflagge */
.peg::after{
  content:'ğŸ´\200Dâ˜ ï¸';
  position:absolute;top:-30px;left:50%;transform:translateX(-50%);
  font-size:1.5rem;pointer-events:none;
}

/************  Disks â†’ Segel  ************/
.disk{
  height:var(--disk-height);
  background:var(--sail);
  border:3px solid var(--sail-border);
  border-radius:8px;
  width:60px;display:flex;align-items:center;justify-content:center;color:#555;font-weight:bold;
  box-shadow:inset 0 0 4px #0003;
}
.disk[data-size="2"]{width:90px;}
.disk[data-size="3"]{width:120px;}

/************  Sonstiges  ************/
#message{margin-top:1.2rem;font-size:1.3rem;min-height:1.3em;}
.hidden{display:none !important;}
video#victoryVideo{margin:2rem auto 0;max-width:100%;border-radius:12px;box-shadow:0 4px 8px rgba(0,0,0,0.15);display:block;}
.invitation{margin-top:2rem;padding:1.2rem;border-radius:12px;background:#fff8e9;box-shadow:0 4px 8px rgba(0,0,0,0.1);}
</style>
</head>
<body>
<h1>âš“Â OSKARS PIRATENâ€‘RÃ„TSELâ€‘EINLADUNGÂ ğŸ´â€â˜ ï¸</h1>
<p>Bringe die drei Segel von der linken auf die rechte Mastspitze â€“ immer nur ein Segel und nie ein grÃ¶ÃŸeres Ã¼ber ein kleineres.</p>

<div id="ship">
  <div id="board">
    <div class="peg" id="peg0"></div>
    <div class="peg" id="peg1"></div>
    <div class="peg" id="peg2"></div>
  </div>
</div>

<div id="message"></div>

<!-- Video direkt unter dem Schiff -->
<video id="victoryVideo" class="hidden" src="oskar.mp4" playsinline controls preload="auto"></video>

<!-- Einladungstext erscheint unter dem Video -->
<div id="invitation" class="invitation hidden">
  <h2>ğŸ‰ Piratenâ€‘Geburtstag ğŸ‰</h2>
  <p><strong>Wie:</strong> <span id="transport"></span></p>
  <p><strong>Wann:</strong> <span id="date"></span> von <span id="time"></span> bis <span id="time_end"></span></p>
  <p><strong>Wo:</strong> <span id="location"></span></p>
  <p>Sag Bescheid, ob du an Bord kommst! ğŸ´â€â˜ ï¸</p>
</div>

<script>
/**********************
 *  KONFIGURATION     *
 **********************/
const INVITATION = {
  transport: "Wir holen die Kinder um 15:00 direkt von der Schule ab und fahren mit ihnen zum Roten Berg. ",
  date: "25. Juni 2025",
  time: "15:00 Uhr",
  time_end: "ca. 18:00 Uhr",
  location: "Roter Berg"
};
/***************************************************/

// PlÃ¤tze befÃ¼llen
["transport","date","time","time_end","location"].forEach(id=>{
  document.getElementById(id).textContent = INVITATION[id];
});

// Drei Segel (3 = grÃ¶ÃŸtes)
const pegs = [[3,2,1],[],[]];
let selectedPeg = null;
const boardEl = document.getElementById("board");
const msgEl   = document.getElementById("message");
const videoEl = document.getElementById("victoryVideo");
const inviteEl= document.getElementById("invitation");

// Loop nur letzte 2Â s
videoEl.addEventListener('ended',()=>{
  if(videoEl.duration>2){
    videoEl.currentTime = videoEl.duration - 2;
    videoEl.play();
  }
});

function render(){
  for(let i=0;i<3;i++){
    const pegEl = document.getElementById("peg"+i);
    pegEl.innerHTML="";
    pegs[i].forEach(size=>{
      const d=document.createElement("div");
      d.className="disk";
      d.dataset.size=size;
      d.textContent=size;
      pegEl.appendChild(d);
    });
  }
}
function isValidMove(from,to){
  return pegs[from].length && (!pegs[to].length || pegs[from].at(-1)<pegs[to].at(-1));
}
function moveDisk(from,to){ pegs[to].push(pegs[from].pop()); }
function checkWin(){ return pegs[2].length===3; }

function victory(){
  videoEl.classList.remove("hidden");
  videoEl.currentTime=0;
  videoEl.muted=false;
  videoEl.play().catch(()=>{});
  inviteEl.classList.remove("hidden");
  setMessage("Arrr! Schatzkarte freigeschaltet. ğŸ´â€â˜ ï¸");
  boardEl.querySelectorAll(".peg").forEach(p=>p.style.cursor="default");
}

function handlePegClick(i){
  if(selectedPeg===null){
    if(!pegs[i].length){ setMessage("Kein Segel am Mast."); return; }
    selectedPeg=i; setMessage(`Segel von Mast ${i+1} gewÃ¤hlt â€“ Zielmast antippen.`);
  }else{
    if(selectedPeg===i){ selectedPeg=null; setMessage("Auswahl aufgehoben."); return; }
    if(isValidMove(selectedPeg,i)){
      moveDisk(selectedPeg,i); render(); checkWin()?victory():setMessage(`Segel gesetzt von Mast ${selectedPeg+1} âœ ${i+1}.`);
    }else{ setMessage("Das geht nicht â€“ grÃ¶ÃŸeres Segel unten!"); }
    selectedPeg=null;
  }
}
function setMessage(t){ msgEl.textContent=t; }

boardEl.querySelectorAll(".peg").forEach((p,i)=>p.addEventListener("click",()=>handlePegClick(i)));
render();
</script>
</body>
</html>
