<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OSKARS GEBURTSTAGSRÃ„TSELEINLADUNG</title>
<style>
:root{
  --peg-width:120px;
  --peg-height:250px;
  --disk-height:30px;
  --bg:#fefae0;
  --peg-color:#dda15e;
  --disk1:#283618;
  --disk2:#606c38;
  --disk3:#bc6c25;
}
body{font-family:Helvetica,Arial,sans-serif;background:var(--bg);margin:0;padding:2rem;text-align:center;color:#333;}
h1{margin-bottom:1rem;}
#board{display:flex;justify-content:space-around;max-width:800px;margin:0 auto;}
.peg{position:relative;width:var(--peg-width);height:var(--peg-height);border:3px solid var(--peg-color);border-radius:10px;display:flex;flex-direction:column-reverse;align-items:center;gap:2px;padding:4px;cursor:pointer;user-select:none;}
.disk{height:var(--disk-height);border-radius:6px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:bold;}
.disk[data-size="1"]{width:60px;background:var(--disk1);} 
.disk[data-size="2"]{width:90px;background:var(--disk2);} 
.disk[data-size="3"]{width:120px;background:var(--disk3);} 
#message{margin-top:1.5rem;font-size:1.2rem;min-height:1.2em;}
.hidden{display:none !important;}
video#victoryVideo{margin:2rem auto 0;max-width:100%;border-radius:12px;box-shadow:0 4px 8px rgba(0,0,0,0.15);}
.invitation{margin-top:2rem;padding:1.5rem;border-radius:12px;background:#fff;box-shadow:0 4px 8px rgba(0,0,0,0.1);}  
</style>
</head>
<body>
<h1>OSKARS GEBURTSTAGSRÃ„TSELEINLADUNG</h1>
<p>Bewege die drei Scheiben vom linken auf den rechten Pfosten â€“ immer nur eine Scheibe und nie eine grÃ¶ÃŸere auf eine kleinere.</p>

<div id="board">
  <div class="peg" id="peg0"></div>
  <div class="peg" id="peg1"></div>
  <div class="peg" id="peg2"></div>
</div>

<div id="message"></div>

<!-- Video direkt unter dem Turm -->
<video id="victoryVideo" class="hidden" src="oskar.mp4" playsinline controls preload="auto"></video>

<!-- Einladungstext erscheint UNTER dem Video -->
<div id="invitation" class="invitation hidden">
  <h2>ðŸŽ‰ Geburtstagseinladung ðŸŽ‰</h2>
  <p><strong>Wer:</strong> <span id="childName"></span></p>
  <p><strong>Wann:</strong> <span id="date"></span> von <span id="time"></span> bis <span id="time_end"></span></p>
  <p><strong>Wo:</strong> <span id="location"></span></p>
  <p>Wir freuen uns auf dich! Bitte gib Bescheid, ob du kommen kannst.</p>
</div>

<script>
/**********************
 *  KONFIGURATION     *
 **********************/
const INVITATION = {
  childName: "Oskar",
  date: "25. Juni 2025",
  time: "14:00 Uhr",
  time_end: "ca. 17:00 Uhr",
  location: "Waldspielplatz"
};
/***************************************************/

// Textfelder befÃ¼llen
["childName","date","time","time_end","location"].forEach(id=>{
  document.getElementById(id).textContent = INVITATION[id];
});

// Drei Scheiben (3 = groÃŸ, 1 = klein)
const pegs = [[3,2,1],[],[]];
let selectedPeg = null;
const boardEl = document.getElementById("board");
const msgEl   = document.getElementById("message");
const videoEl = document.getElementById("victoryVideo");
const inviteEl= document.getElementById("invitation");

//  >>> Loop-LogikÂ â€“ letzte 2Â Sekunden <<<
videoEl.addEventListener('ended',()=>{
  if(videoEl.duration>2){
    videoEl.currentTime = videoEl.duration - 2;
    videoEl.play();
  }
});

function render(){
  for(let i=0;i<3;i++){
    const pegEl = document.getElementById("peg"+i);
    pegEl.innerHTML="";
    pegs[i].forEach(size=>{
      const d=document.createElement("div");
      d.className="disk";
      d.dataset.size=size;
      d.textContent=size;
      pegEl.appendChild(d);
    });
  }
}
function isValidMove(from,to){
  return pegs[from].length && (!pegs[to].length || pegs[from].at(-1)<pegs[to].at(-1));
}
function moveDisk(from,to){ pegs[to].push(pegs[from].pop()); }
function checkWin(){ return pegs[2].length===3; }

function victory(){
  videoEl.classList.remove("hidden");
  videoEl.currentTime=0;
  videoEl.muted=false;
  videoEl.play().catch(()=>{});
  inviteEl.classList.remove("hidden");
  setMessage("Geschafft! ðŸŽ‰ Einladung freigeschaltet.");
  boardEl.querySelectorAll(".peg").forEach(p=>p.style.cursor="default");
}

function handlePegClick(i){
  if(selectedPeg===null){
    if(!pegs[i].length){ setMessage("Da ist keine Scheibe."); return; }
    selectedPeg=i; setMessage(`Scheibe von Stange ${i+1} ausgewÃ¤hlt. Ziel wÃ¤hlen.`);
  }else{
    if(selectedPeg===i){ selectedPeg=null; setMessage("Auswahl aufgehoben."); return; }
    if(isValidMove(selectedPeg,i)){ moveDisk(selectedPeg,i); render(); checkWin()?victory():setMessage(`Scheibe verschoben von ${selectedPeg+1} zu ${i+1}.`);
    }else{ setMessage("UngÃ¼ltiger Zug."); }
    selectedPeg=null;
  }
}
function setMessage(t){ msgEl.textContent=t; }

boardEl.querySelectorAll(".peg").forEach((p,i)=>p.addEventListener("click",()=>handlePegClick(i)));
render();
</script>
</body>
</html>

